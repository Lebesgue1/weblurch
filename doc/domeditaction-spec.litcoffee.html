<html>
    <head>
        <link rel="stylesheet" href="./main.css"/>
        <link rel="stylesheet" href="./obsidian.css"/>
        <link rel="shortcut icon" href="favicon.png"/>
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config( {
              tex2jax: { inlineMath: [ [ '$', '$' ], [ '\\(', '\\)' ] ] }
            } );
        </script>
        <script type="text/javascript"
                src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
        <title>webLurch docs: domeditaction-spec</title>
    </head>
    <body>
        <div id="left">
            <p align=center>Page contents</p>
<p><a href='#tests-for-the-code-domeditaction-code-class'>Tests for the <code>DOMEditAction</code> class</a></p><ul>
<li><a href='#domeditaction-class'>DOMEditAction class</a></li><ul>
<li><a href='#should-exist'>should exist</a></li><li><a href='#should-have-quot-appendchild-quot-instances'>should have &quot;appendChild&quot; instances</a></li><li><a href='#should-have-quot-insertbefore-quot-instances'>should have &quot;insertBefore&quot; instances</a></li><li><a href='#should-have-quot-normalize-quot-instances'>should have &quot;normalize&quot; instances</a></li><li><a href='#should-have-quot-removeattribute-quot-instances'>should have &quot;removeAttribute&quot; instances</a></li><li><a href='#should-have-quot-removeattributenode-quot-instances'>should have &quot;removeAttributeNode&quot; instances</a></li><li><a href='#should-have-quot-removechild-quot-instances'>should have &quot;removeChild&quot; instances</a></li><li><a href='#should-have-quot-replacechild-quot-instances'>should have &quot;replaceChild&quot; instances</a></li><li><a href='#should-have-quot-setattribute-quot-instances'>should have &quot;setAttribute&quot; instances</a></li><li><a href='#should-have-quot-setattributenode-quot-instances'>should have &quot;setAttributeNode&quot; instances</a></li><li><a href='#should-have-no-other-instances'>should have no other instances</a></li>
        </div>
        <div id="middle">
            <h1><a name='tests-for-the-code-domeditaction-code-class'></a>Tests for the <code>DOMEditAction</code> class &nbsp; <font size=-1><a href='test-results.md.html#tests-for-the-code-domeditaction-code-class'>see results</a></font> <font size=-1><a href='#tests-for-the-code-domeditaction-code-class'><img src="link.png" class="anchor"></a></font></h1><p>Pull in the utility functions in
<a href="phantom-utils.litcoffee.html">phantom-utils</a> that make it
easier to write the tests below.  Then follow the same structure
for setting up tests as documented more thoroughly in
<a href="basic-spec.litcoffee.html">the basic unit test</a>.</p>
<pre class="hljs"><code>{ phantomDescribe } = <span class="hljs-built_in">require</span> <span class="hljs-string">'./phantom-utils'</span>
</code></pre><h2><a name='domeditaction-class'></a>DOMEditAction class &nbsp; <font size=-1><a href='test-results.md.html#domeditaction-class'>see results</a></font> <font size=-1><a href='#domeditaction-class'><img src="link.png" class="anchor"></a></font></h2><pre class="hljs"><code>phantomDescribe <span class="hljs-string">'DOMEditAction class'</span>, <span class="hljs-string">'./app/index.html'</span>,<span class="hljs-function"> -&gt;</span>
</code></pre><h3><a name='should-exist'></a>should exist &nbsp; <font size=-1><a href='test-results.md.html#should-exist'>see results</a></font> <font size=-1><a href='#should-exist'><img src="link.png" class="anchor"></a></font></h3><p>That is, the class should be defined in the global namespace of
the browser after loading the main app page.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should exist'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate (<span class="hljs-function"> -&gt;</span> DOMEditAction ),
        <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result ).toBeTruthy()
            done()
</code></pre><h3><a name='should-have-quot-appendchild-quot-instances'></a>should have &quot;appendChild&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-appendchild-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-appendchild-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;appendChild&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation for the
class&#39;s constructor</a>.
These will have a <code>toAppend</code> member that stores the child to be
appended.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "appendChild" instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            span = <span class="hljs-built_in">document</span>.createElement <span class="hljs-string">'span'</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'appendChild'</span>, div, span
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.toAppend
                T.type
            ]
            result
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual tagName : <span class="hljs-string">'SPAN'</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual <span class="hljs-string">'appendChild'</span>
            done()
</code></pre><h3><a name='should-have-quot-insertbefore-quot-instances'></a>should have &quot;insertBefore&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-insertbefore-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-insertbefore-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;insertBefore&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation for the
class&#39;s constructor</a>.
These will have a <code>toInsert</code> member that stores the child to be
inserted, as well as an integer member <code>insertBefore</code> that is the
index that the newly inserted child will have after insertion.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "insertBefore" instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            span = <span class="hljs-built_in">document</span>.createElement <span class="hljs-string">'span'</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'insertBefore'</span>, div, span
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.toInsert
                T.insertBefore
                T.type
            ]
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual tagName : <span class="hljs-string">'SPAN'</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual <span class="hljs-number">1</span>
            expect( result[<span class="hljs-number">4</span>] ).toEqual <span class="hljs-string">'insertBefore'</span>
            done()
</code></pre><h3><a name='should-have-quot-normalize-quot-instances'></a>should have &quot;normalize&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-normalize-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-normalize-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;normalize&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation for the
class&#39;s constructor</a>.
These will have a <code>textChildren</code> member that maps the indices of
child text elements (before the normalization) to their text
content at that time.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "normalize" instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            div.innerHTML = <span class="hljs-string">'one'</span>
            div.appendChild <span class="hljs-built_in">document</span>.createTextNode <span class="hljs-string">'two'</span>
            span = <span class="hljs-built_in">document</span>.createElement <span class="hljs-string">'span'</span>
            span.appendChild <span class="hljs-built_in">document</span>.createTextNode <span class="hljs-string">'three'</span>
            div.appendChild span
            div.appendChild <span class="hljs-built_in">document</span>.createTextNode <span class="hljs-string">'four'</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'normalize'</span>, div
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.textChildren
                T.type
            ]
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual
                <span class="hljs-number">0</span> : <span class="hljs-string">'one'</span>, <span class="hljs-number">1</span> : <span class="hljs-string">'two'</span>, <span class="hljs-number">3</span> : <span class="hljs-string">'four'</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual <span class="hljs-string">'normalize'</span>
            done()
</code></pre><h3><a name='should-have-quot-removeattribute-quot-instances'></a>should have &quot;removeAttribute&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-removeattribute-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-removeattribute-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;removeAttribute&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation for
the class&#39;s constructor</a>.
These will have a <code>name</code> member containing the (string) key of the
attribute to remove, and a <code>value</code> member containing the (string)
value that the attribute had before removal.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "removeAttribute" instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'removeAttribute'</span>, div, <span class="hljs-string">'id'</span>
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.name
                T.value
                T.type
            ]
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual <span class="hljs-string">'id'</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual <span class="hljs-string">'0'</span>
            expect( result[<span class="hljs-number">4</span>] ).toEqual <span class="hljs-string">'removeAttribute'</span>
            done()
</code></pre><h3><a name='should-have-quot-removeattributenode-quot-instances'></a>should have &quot;removeAttributeNode&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-removeattributenode-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-removeattributenode-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;removeAttributeNode&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation
for the class&#39;s constructor</a>.
These will have a <code>name</code> member containing the (string) key of the
attribute to remove, and a <code>value</code> member containing the (string)
value that the attribute had before removal.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "removeAttributeNode" instances'</span>,
    <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'removeAttributeNode'</span>, div,
                div.getAttributeNode <span class="hljs-string">'id'</span>
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.name
                T.value
                T.type
            ]
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual <span class="hljs-string">'id'</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual <span class="hljs-string">'0'</span>
            expect( result[<span class="hljs-number">4</span>] ).toEqual <span class="hljs-string">'removeAttributeNode'</span>
            done()
</code></pre><h3><a name='should-have-quot-removechild-quot-instances'></a>should have &quot;removeChild&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-removechild-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-removechild-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;removeChild&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation for the
class&#39;s constructor</a>.
These will have an integer <code>childIndex</code> member containing the
index of the child before removal, and a <code>child</code> member containing
a serialized version of the removed child.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "removeChild" instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            div.innerHTML = <span class="hljs-string">'first child text node'</span>
            span = <span class="hljs-built_in">document</span>.createElement <span class="hljs-string">'span'</span>
            span.innerHTML = <span class="hljs-string">'span contents, just text'</span>
            div.appendChild span
            div.appendChild <span class="hljs-built_in">document</span>.createTextNode <span class="hljs-string">'more text'</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'removeChild'</span>, div, span
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.childIndex
                T.child
                T.type
            ]
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual <span class="hljs-number">1</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual
                <span class="hljs-string">'tagName'</span> : <span class="hljs-string">'SPAN'</span>,
                <span class="hljs-string">'children'</span> : [ <span class="hljs-string">'span contents, just text'</span> ]
            expect( result[<span class="hljs-number">4</span>] ).toEqual <span class="hljs-string">'removeChild'</span>
            done()
</code></pre><h3><a name='should-have-quot-replacechild-quot-instances'></a>should have &quot;replaceChild&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-replacechild-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-replacechild-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;replaceChild&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation for the
class&#39;s constructor</a>.
These will have an integer <code>childIndex</code> member containing the
index of the child being replaced, an <code>oldChild</code> member containing
a serialized version of the replaced child, and a <code>newChild</code>
member containing a serialization of the replacement child.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "replaceChild" instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            div.innerHTML = <span class="hljs-string">'first child text node'</span>
            span = <span class="hljs-built_in">document</span>.createElement <span class="hljs-string">'span'</span>
            span.innerHTML = <span class="hljs-string">'span contents, just text'</span>
            div.appendChild span
            div.appendChild <span class="hljs-built_in">document</span>.createTextNode <span class="hljs-string">'more text'</span>
            repl = <span class="hljs-built_in">document</span>.createElement <span class="hljs-string">'h1'</span>
            repl.innerHTML = <span class="hljs-string">'Announcement!'</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'replaceChild'</span>,
                div, repl, span
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.childIndex
                T.oldChild
                T.newChild
                T.type
            ]
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual <span class="hljs-number">1</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual
                <span class="hljs-string">'tagName'</span> : <span class="hljs-string">'SPAN'</span>,
                <span class="hljs-string">'children'</span> : [ <span class="hljs-string">'span contents, just text'</span> ]
            expect( result[<span class="hljs-number">4</span>] ).toEqual
                <span class="hljs-string">'tagName'</span> : <span class="hljs-string">'H1'</span>,
                <span class="hljs-string">'children'</span> : [ <span class="hljs-string">'Announcement!'</span> ]
            expect( result[<span class="hljs-number">5</span>] ).toEqual <span class="hljs-string">'replaceChild'</span>
            done()
</code></pre><h3><a name='should-have-quot-setattribute-quot-instances'></a>should have &quot;setAttribute&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-setattribute-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-setattribute-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;setAttribute&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation for the
class&#39;s constructor</a>.
These will have a string <code>name</code> member containing the name of the
attribute being changed, a string <code>oldValue</code> member containing the
value of the attribute before it was set, and a string <code>newValue</code>
member containing the value after the attribute is set.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "setAttribute" instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'setAttribute'</span>, div, <span class="hljs-string">'id'</span>, <span class="hljs-number">1</span>
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.name
                T.oldValue
                T.newValue
                T.type
            ]
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual <span class="hljs-string">'id'</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual <span class="hljs-string">'0'</span>
            expect( result[<span class="hljs-number">4</span>] ).toEqual <span class="hljs-string">'1'</span>
            expect( result[<span class="hljs-number">5</span>] ).toEqual <span class="hljs-string">'setAttribute'</span>
            done()
</code></pre><h3><a name='should-have-quot-setattributenode-quot-instances'></a>should have &quot;setAttributeNode&quot; instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-quot-setattributenode-quot-instances'>see results</a></font> <font size=-1><a href='#should-have-quot-setattributenode-quot-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should be able to construct instances of the class with
the type &quot;setAttributeNode&quot;, as described <a href="domeditaction.litcoffee.html#constructor">in the documentation for
the class&#39;s constructor</a>.
These will have a string <code>name</code> member containing the name of the
attribute being changed, a string <code>oldValue</code> member containing the
value of the attribute before it was set, and a string <code>newValue</code>
member containing the value after the attribute is set.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have "setAttributeNode" instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            attr = <span class="hljs-built_in">document</span>.createAttribute <span class="hljs-string">'id'</span>
            attr.value = <span class="hljs-number">1</span>
            T = <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'setAttributeNode'</span>, div, attr
            result = [
                T.tracker <span class="hljs-keyword">is</span> DOMEditTracker.instances[<span class="hljs-number">0</span>]
                T.node
                T.name
                T.oldValue
                T.newValue
                T.type
            ]
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( result[<span class="hljs-number">1</span>] ).toEqual []
            expect( result[<span class="hljs-number">2</span>] ).toEqual <span class="hljs-string">'id'</span>
            expect( result[<span class="hljs-number">3</span>] ).toEqual <span class="hljs-string">'0'</span>
            expect( result[<span class="hljs-number">4</span>] ).toEqual <span class="hljs-string">'1'</span>
            expect( result[<span class="hljs-number">5</span>] ).toEqual <span class="hljs-string">'setAttributeNode'</span>
            done()
</code></pre><h3><a name='should-have-no-other-instances'></a>should have no other instances &nbsp; <font size=-1><a href='test-results.md.html#should-have-no-other-instances'>see results</a></font> <font size=-1><a href='#should-have-no-other-instances'><img src="link.png" class="anchor"></a></font></h3><p>That is, we should get errors if we attempt to construct instances
of the class with types other than those tested in the other tests
in this specification, above.</p>
<pre class="hljs"><code>    it <span class="hljs-string">'should have no other instances'</span>, <span class="hljs-function"><span class="hljs-params">( done )</span> =&gt;</span>
        <span class="hljs-property">@page</span>.evaluate<span class="hljs-function"> -&gt;</span>
            div = <span class="hljs-built_in">document</span>.getElementById <span class="hljs-string">'0'</span>
            result = []
            result.push <span class="hljs-keyword">try</span> <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-string">'foo'</span>, div \
                        <span class="hljs-keyword">catch</span> e <span class="hljs-keyword">then</span> e.message
            result.push <span class="hljs-keyword">try</span> <span class="hljs-keyword">new</span> DOMEditAction div, div \
                        <span class="hljs-keyword">catch</span> e <span class="hljs-keyword">then</span> e.message
            result.push <span class="hljs-keyword">try</span> <span class="hljs-keyword">new</span> DOMEditAction <span class="hljs-number">17</span>, div \
                        <span class="hljs-keyword">catch</span> e <span class="hljs-keyword">then</span> e.message
            result.push <span class="hljs-keyword">try</span> <span class="hljs-keyword">new</span> DOMEditAction \
                        <span class="hljs-string">'appendChildren'</span>, div \
                        <span class="hljs-keyword">catch</span> e <span class="hljs-keyword">then</span> e.message
            result
        , <span class="hljs-function"><span class="hljs-params">( err, result )</span> -&gt;</span>
            expect( <span class="hljs-regexp">/Invalid DOMEditAction type/</span>.test
                result[<span class="hljs-number">0</span>] ).toBeTruthy()
            expect( <span class="hljs-regexp">/Invalid DOMEditAction type/</span>.test
                result[<span class="hljs-number">1</span>] ).toBeTruthy()
            expect( <span class="hljs-regexp">/Invalid DOMEditAction type/</span>.test
                result[<span class="hljs-number">2</span>] ).toBeTruthy()
            expect( <span class="hljs-regexp">/Invalid DOMEditAction type/</span>.test
                result[<span class="hljs-number">3</span>] ).toBeTruthy()
            done()
</code></pre><p>Eventually it would also be good to test here every other error
case in the constructor, but I have not yet written such tests.
I have added them to <a href="plan.md.html">the planning document</a>,
however, so they are not forgotten.</p>

        </div>
        <div id="right">
            <h3 align=center>Navigation</h3><br><h3><a href='index.md.html'>webLurch home</a></h3><p>.</p><ul><li><a href='buildutils.litcoffee.html'>buildutils.litcoffee</a></li><li><a href='cake.litcoffee.html'>cake.litcoffee</a></li></ul><p>./app</p><ul><li><a href='../app/index.html'>index.html</a></li></ul><p>./doc</p><ul><li><a href='plan.md.html'>plan.md</a></li><li><a href='test-results.md.html'>test-results.md</a></li></ul><p>./src</p><ul><li><a href='domeditaction.litcoffee.html'>domeditaction.litcoffee</a></li><li><a href='domedittracker.litcoffee.html'>domedittracker.litcoffee</a></li><li><a href='domutils.litcoffee.html'>domutils.litcoffee</a></li><li><a href='lurcheditor.litcoffee.html'>lurcheditor.litcoffee</a></li></ul><p>./test</p><ul><li><a href='basic-spec.litcoffee.html'>basic-spec.litcoffee</a></li><li><a href='domeditaction-spec.litcoffee.html'>domeditaction-spec.litcoffee</a></li><li><a href='domedittracker-spec.litcoffee.html'>domedittracker-spec.litcoffee</a></li><li><a href='domutils-spec.litcoffee.html'>domutils-spec.litcoffee</a></li><li><a href='lurcheditor-spec.litcoffee.html'>lurcheditor-spec.litcoffee</a></li><li><a href='phantom-utils.litcoffee.html'>phantom-utils.litcoffee</a></li></ul><p>./testapp</p><ul><li><a href='utils.litcoffee.html'>utils.litcoffee</a></li><li><a href='../testapp/index.html'>index.html</a></li></ul>
        </div>
    </body>
</html>
