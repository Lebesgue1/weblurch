(function(){var t,e,n,i,r,o,l={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};CanvasRenderingContext2D.prototype.roundedRect=function(t,e,n,i,r){return this.beginPath(),this.moveTo(t+r,e),this.lineTo(n-r,e),this.arcTo(n,e,n,e+r,r),this.lineTo(n,i-r),this.arcTo(n,i,n-r,i,r),this.lineTo(t+r,i),this.arcTo(t,i,t,i-r,r),this.lineTo(t,e+r),this.arcTo(t,e,t+r,e,r),this.closePath()},CanvasRenderingContext2D.prototype.roundedZone=function(t,e,n,i,r,o,l,s,a){return this.beginPath(),this.moveTo(t+a,e),this.lineTo(this.canvas.width-s,e),this.lineTo(this.canvas.width-s,o),this.lineTo(n,o),this.lineTo(n,i-a),this.arcTo(n,i,n-a,i,a),this.lineTo(l,i),this.lineTo(l,r),this.lineTo(t,r),this.lineTo(t,e+a),this.arcTo(t,e,t+a,e,a),this.closePath()},window.rectanglesCollide=function(t,e,n,i,r,o,l,s){return!(r>=n||t>=l||o>=i||e>=s)},n={order:[],maxSize:100},e=function(t,e){var i;return i=JSON.stringify([t,e]),n.hasOwnProperty(i)?n[i]:null},t=function(t,e,i){var o;return o=JSON.stringify([t,e]),n[o]=i,r(t,e)},r=function(t,e){var i,r;return r=JSON.stringify([t,e]),(i=n.order.indexOf(r))>-1&&n.order.splice(i,1),n.order.unshift(r),o()},o=function(){var t;for(t=[];n.order.length>n.maxSize;)t.push(delete n[n.order.pop()]);return t},CanvasRenderingContext2D.prototype.drawHTML=function(n,o,l,s){var a,u,d,h,c,f,p,g,m;return null==s&&(s="font-size:12px"),(d=e(n,s))?(this.drawImage(d,o,l),r(n,s),!0):(h=document.createElement("span"),h.setAttribute("style",s),h.innerHTML=n,document.body.appendChild(h),h=$(h),p=h.width(),u=h.height(),h.remove(),a="<svg xmlns='http://www.w3.org/2000/svg' width='"+p+"' height='"+u+"'><foreignObject width='100%' height='100%'><div xmlns='http://www.w3.org/1999/xhtml' style='"+s+"'>"+n+"</div></foreignObject></svg>",c=i(a,"image/svg+xml;charset=utf-8"),f=(null!=(g=null!=(m=window.URL)?m:window.webkitURL)?g:window).createObjectURL(c),d=new Image,d.onload=function(){var e,i;return t(n,s,d),(null!=(e=null!=(i=window.URL)?i:window.webkitURL)?e:window).revokeObjectURL(f)},d.onerror=function(e){return t(n,s,new Image),console.log("Failed to load SVG with this <foreignObject> div content:",n)},d.src=f,!1)},i=function(t,e){var n,i,r,o,l;try{return new Blob([t],{type:e})}catch(s){if(i=s,window.BlobBuilder=null!=(r=null!=(o=null!=(l=window.BlobBuilder)?l:window.WebKitBlobBuilder)?o:window.MozBlobBuilder)?r:window.MSBlobBuilder,"TypeError"===i.name&&null!=window.BlobBuilder)return n=new BlobBuilder,n.append(t.buffer),n.getBlob(e);if("InvalidStateError"===i.name)return new Blob([t.buffer],{type:e})}},CanvasRenderingContext2D.prototype.measureHTML=function(t,n){var i;return null==n&&(n="font-size:12px"),(i=e(t,n))?(r(t,n),{width:i.width,height:i.height}):(this.drawHTML(t,0,0,n),null)},window.installDOMUtilitiesIn=function(t){return t.Node.prototype.address=function(t){var e;return null==t&&(t=null),this===t?[]:this.parentNode?(e=this.parentNode.address(t),null===e?null:e.concat([this.indexInParent()])):t?null:[]},t.Node.prototype.indexInParent=function(){return this.parentNode?Array.prototype.slice.apply(this.parentNode.childNodes).indexOf(this):-1},t.Node.prototype.index=function(t){var e;if(!(t instanceof Array))throw Error("Node address function requires an array");return 0===t.length?this:"number"!=typeof t[0]?void 0:null!=(e=this.childNodes[t[0]])?e.index(t.slice(1)):void 0},t.Node.prototype.toJSON=function(e){var n,i,r,o,l,s;if(null==e&&(e=!0),this instanceof t.Text)return this.textContent;if(this instanceof t.Comment)return e?{comment:!0,content:this.textContent}:{m:!0,n:this.textContent};if(!(this instanceof t.Element))throw Error("Cannot serialize this node: "+this);if(r={tagName:this.tagName},this.attributes.length)for(r.attributes={},s=this.attributes,o=0,l=s.length;l>o;o++)n=s[o],r.attributes[n.name]=n.value;return this.childNodes.length&&(r.children=function(){var t,n,r,o;for(r=this.childNodes,o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push(i.toJSON(e));return o}.call(this)),e||(r.t=r.tagName,delete r.tagName,r.a=r.attributes,delete r.attributes,r.c=r.children,delete r.children),r},t.Node.fromJSON=function(e){var n,i,r,o,s,a,u,d;if("string"==typeof e)return t.document.createTextNode(e);if("comment"in e&&e.comment)return t.document.createComment(e.content);if("m"in e&&e.m)return t.document.createComment(e.n);if(!1 in e&&!1 in e)throw Error("Object has no t[agName]: "+this);if(s=t.document.createElement(e.tagName||e.t),n=e.attributes||e.a)for(o in n)l.call(n,o)&&(a=n[o],s.setAttribute(o,a));if(r=e.children||e.c)for(u=0,d=r.length;d>u;u++)i=r[u],s.appendChild(Node.fromJSON(i));return s},t.Node.prototype.nextLeaf=function(t){var e;for(null==t&&(t=null),e=this;e&&e!==t&&!e.nextSibling;)e=e.parentNode;if(e=null!=e?e.nextSibling:void 0,!e)return null;for(;e.childNodes.length>0;)e=e.childNodes[0];return e},t.Node.prototype.previousLeaf=function(t){var e;for(null==t&&(t=null),e=this;e&&e!==t&&!e.previousSibling;)e=e.parentNode;if(e=null!=e?e.previousSibling:void 0,!e)return null;for(;e.childNodes.length>0;)e=e.childNodes[e.childNodes.length-1];return e},t.Node.prototype.remove=function(){var t;return null!=(t=this.parentNode)?t.removeChild(this):void 0},t.Element.prototype.hasClass=function(t){var e,n;return e=null!=(n=this.getAttribute("class"))?n.split(/\s+/):void 0,e&&s.call(e,t)>=0},t.Element.prototype.addClass=function(t){var e,n;return e=(null!=(n=this.getAttribute("class"))?n.split(/\s+/):void 0)||[],s.call(e,t)<0&&e.push(t),this.setAttribute("class",e.join(" "))},t.Element.prototype.removeClass=function(t){var e,n,i;return n=(null!=(i=this.getAttribute("class"))?i.split(/\s+/):void 0)||[],n=function(){var i,r,o;for(o=[],i=0,r=n.length;r>i;i++)e=n[i],e!==t&&o.push(e);return o}(),n.length>0?this.setAttribute("class",n.join(" ")):this.removeAttribute("class")},t.document.nodeFromPoint=function(e,n){var i,r,o,l,s,a,u,d,h,c;for(i=t.document.elementFromPoint(e,n),h=i.childNodes,s=0,u=h.length;u>s;s++)if(r=h[s],r instanceof t.Text)for(o=t.document.createRange(),o.selectNode(r),c=o.getClientRects(),a=0,d=c.length;d>a;a++)if(l=c[a],l.left<e&&e<l.right&&l.top<n&&n<l.bottom)return r;return i}},installDOMUtilitiesIn(window),JSON.equals=function(t,e){var n,i,r,o,l;if(t instanceof Object!=e instanceof Object)return!1;if(t instanceof Array!=e instanceof Array)return!1;if(!(t instanceof Object))return t===e;if(i=Object.keys(t).sort(),r=Object.keys(e).sort(),JSON.stringify(i)!==JSON.stringify(r))return!1;for(o=0,l=i.length;l>o;o++)if(n=i[o],!JSON.equals(t[n],e[n]))return!1;return!0}}).call(this);
//# sourceMappingURL=weblurch.min.js.map