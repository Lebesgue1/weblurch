(function(){var t,e,n,r,i,o,l={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};CanvasRenderingContext2D.prototype.roundedRect=function(t,e,n,r,i){return this.beginPath(),this.moveTo(t+i,e),this.lineTo(n-i,e),this.arcTo(n,e,n,e+i,i),this.lineTo(n,r-i),this.arcTo(n,r,n-i,r,i),this.lineTo(t+i,r),this.arcTo(t,r,t,r-i,i),this.lineTo(t,e+i),this.arcTo(t,e,t+i,e,i),this.closePath()},CanvasRenderingContext2D.prototype.roundedZone=function(t,e,n,r,i,o,l,s,a){return this.beginPath(),this.moveTo(t+a,e),this.lineTo(this.canvas.width-s,e),this.lineTo(this.canvas.width-s,o),this.lineTo(n,o),this.lineTo(n,r-a),this.arcTo(n,r,n-a,r,a),this.lineTo(l,r),this.lineTo(l,i),this.lineTo(t,i),this.lineTo(t,e+a),this.arcTo(t,e,t+a,e,a),this.closePath()},window.rectanglesCollide=function(t,e,n,r,i,o,l,s){return!(i>=n||t>=l||o>=r||e>=s)},n={order:[],maxSize:100},e=function(t,e){var r;return r=JSON.stringify([t,e]),n.hasOwnProperty(r)?n[r]:null},t=function(t,e,r){var o;return o=JSON.stringify([t,e]),n[o]=r,i(t,e)},i=function(t,e){var r,i;return i=JSON.stringify([t,e]),(r=n.order.indexOf(i))>-1&&n.order.splice(r,1),n.order.unshift(i),o()},o=function(){var t;for(t=[];n.order.length>n.maxSize;)t.push(delete n[n.order.pop()]);return t},CanvasRenderingContext2D.prototype.drawHTML=function(n,o,l,s){var a,u,h,d,c,f,p,g,m;return null==s&&(s="font-size:12px"),(h=e(n,s))?(this.drawImage(h,o,l),i(n,s),!0):(d=document.createElement("span"),d.setAttribute("style",s),d.innerHTML=n,document.body.appendChild(d),d=$(d),p=d.width(),u=d.height(),d.remove(),a="<svg xmlns='http://www.w3.org/2000/svg' width='"+p+"' height='"+u+"'><foreignObject width='100%' height='100%'><div xmlns='http://www.w3.org/1999/xhtml' style='"+s+"'>"+n+"</div></foreignObject></svg>",c=r(a,"image/svg+xml;charset=utf-8"),f=(null!=(g=null!=(m=window.URL)?m:window.webkitURL)?g:window).createObjectURL(c),h=new Image,h.onload=function(){var e,r;return t(n,s,h),(null!=(e=null!=(r=window.URL)?r:window.webkitURL)?e:window).revokeObjectURL(f)},h.onerror=function(e){return t(n,s,new Image),console.log("Improperly formed HTML:",n)},h.src=f,!1)},r=function(t,e){var n,r,i,o,l;try{return new Blob([t],{type:e})}catch(s){if(r=s,window.BlobBuilder=null!=(i=null!=(o=null!=(l=window.BlobBuilder)?l:window.WebKitBlobBuilder)?o:window.MozBlobBuilder)?i:window.MSBlobBuilder,"TypeError"===r.name&&null!=window.BlobBuilder)return n=new BlobBuilder,n.append(t.buffer),n.getBlob(e);if("InvalidStateError"===r.name)return new Blob([t.buffer],{type:e})}},CanvasRenderingContext2D.prototype.measureHTML=function(t,n){var r;return null==n&&(n="font-size:12px"),(r=e(t,n))?(i(t,n),{width:r.width,height:r.height}):(this.drawHTML(t,0,0,n),null)},Node.prototype.address=function(t){var e;return null==t&&(t=null),this===t?[]:this.parentNode?(e=this.parentNode.address(t),null===e?null:e.concat([this.indexInParent()])):t?null:[]},Node.prototype.indexInParent=function(){return this.parentNode?Array.prototype.slice.apply(this.parentNode.childNodes).indexOf(this):-1},Node.prototype.index=function(t){var e;if(!(t instanceof Array))throw Error("Node address function requires an array");return 0===t.length?this:"number"!=typeof t[0]?void 0:null!=(e=this.childNodes[t[0]])?e.index(t.slice(1)):void 0},Node.prototype.toJSON=function(t){var e,n,r,i,o,l;if(null==t&&(t=!0),this instanceof Text)return this.textContent;if(this instanceof Comment)return t?{comment:!0,content:this.textContent}:{m:!0,n:this.textContent};if(!(this instanceof Element))throw Error("Cannot serialize this node: "+this);if(r={tagName:this.tagName},this.attributes.length)for(r.attributes={},l=this.attributes,i=0,o=l.length;o>i;i++)e=l[i],r.attributes[e.name]=e.value;return this.childNodes.length&&(r.children=function(){var e,r,i,o;for(i=this.childNodes,o=[],e=0,r=i.length;r>e;e++)n=i[e],o.push(n.toJSON(t));return o}.call(this)),t||(r.t=r.tagName,delete r.tagName,r.a=r.attributes,delete r.attributes,r.c=r.children,delete r.children),r},Node.fromJSON=function(t){var e,n,r,i,o,s,a,u;if("string"==typeof t)return document.createTextNode(t);if("comment"in t&&t.comment)return document.createComment(t.content);if("m"in t&&t.m)return document.createComment(t.n);if(!1 in t&&!1 in t)throw Error("Object has no t[agName]: "+this);if(o=document.createElement(t.tagName||t.t),e=t.attributes||t.a)for(i in e)l.call(e,i)&&(s=e[i],o.setAttribute(i,s));if(r=t.children||t.c)for(a=0,u=r.length;u>a;a++)n=r[a],o.appendChild(Node.fromJSON(n));return o},Node.prototype.nextLeaf=function(t){var e;for(null==t&&(t=null),e=this;e&&e!==t&&!e.nextSibling;)e=e.parentNode;if(e=null!=e?e.nextSibling:void 0,!e)return null;for(;e.childNodes.length>0;)e=e.childNodes[0];return e},Node.prototype.previousLeaf=function(t){var e;for(null==t&&(t=null),e=this;e&&e!==t&&!e.previousSibling;)e=e.parentNode;if(e=null!=e?e.previousSibling:void 0,!e)return null;for(;e.childNodes.length>0;)e=e.childNodes[e.childNodes.length-1];return e},Node.prototype.remove=function(){var t;return null!=(t=this.parentNode)?t.removeChild(this):void 0},Element.prototype.hasClass=function(t){var e,n;return e=null!=(n=this.getAttribute("class"))?n.split(/\s+/):void 0,e&&s.call(e,t)>=0},Element.prototype.addClass=function(t){var e,n;return e=(null!=(n=this.getAttribute("class"))?n.split(/\s+/):void 0)||[],s.call(e,t)<0&&e.push(t),this.setAttribute("class",e.join(" "))},Element.prototype.removeClass=function(t){var e,n,r;return n=(null!=(r=this.getAttribute("class"))?r.split(/\s+/):void 0)||[],n=function(){var r,i,o;for(o=[],r=0,i=n.length;i>r;r++)e=n[r],e!==t&&o.push(e);return o}(),n.length>0?this.setAttribute("class",n.join(" ")):this.removeAttribute("class")},JSON.equals=function(t,e){var n,r,i,o,l;if(t instanceof Object!=e instanceof Object)return!1;if(t instanceof Array!=e instanceof Array)return!1;if(!(t instanceof Object))return t===e;if(r=Object.keys(t).sort(),i=Object.keys(e).sort(),JSON.stringify(r)!==JSON.stringify(i))return!1;for(o=0,l=r.length;l>o;o++)if(n=r[o],!JSON.equals(t[n],e[n]))return!1;return!0}}).call(this);
//# sourceMappingURL=weblurch.min.js.map