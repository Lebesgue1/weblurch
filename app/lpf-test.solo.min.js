(function(){var e,t,n,r,o,a,l,i,s,u,c,f,d,p={}.hasOwnProperty,h=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},v=[].slice;c=function(e,t){var n,r;return n=JSON.parse(null!=(r=window.localStorage.testData)?r:"{}"),n[e]=t,window.localStorage.testData=JSON.stringify(n)},f=function(){var e,t;return e=JSON.parse(null!=(t=window.localStorage.testData)?t:"{}"),Object.keys(e).sort()},o=function(e){var t,n;return t=JSON.parse(null!=(n=window.localStorage.testData)?n:"{}"),t[e]},s=function(e){var t,n;return t=JSON.parse(null!=(n=window.localStorage.testData)?n:"{}"),delete t[e],window.localStorage.testData=JSON.stringify(t)},l=null,i=function(){return(new Date).getTime()},d=function(){return l=i()},t=function(){return"(took "+(i()-l)+" ms)"},e=window.Module={},e.TOTAL_MEMORY=67108864,e.noExitRuntime=!0,a=null,r=null,e.print=function(e){var t;if(t=null,t=/FLYCHECK_BEGIN (.*)/.exec(e))return a={type:t[1],text:[]};if(a)return(t=/([^:]+):(\d+):(\d+): (.*)/.exec(e))?(a.file=t[1],a.line=t[2],a["char"]=t[3],a.info=t[4]):/FLYCHECK_END/.test(e)?(r.push(a),a=null):a.text.push(e);throw new Error("Unexpected output from Lean: "+e)},e.preRun=[function(){return d()}],u=window.runLeanOn=function(t){return d(),e.lean_init(),d(),FS.writeFile("test.lean",t,{encoding:"utf8"}),d(),r=[],e.lean_process_file("test.lean"),r},$(function(){var e,t,r,a,l,i,d,v;return $('[data-toggle="tooltip"]').tooltip(),t=null,r=null,a=null,l=null,v=function(){var e;return e=$(".output-tabs > li.active > a").get(0),parseInt(e.getAttribute("id").slice(-1))},e=function(e){var t;return $(".output-tabs > li").removeClass("active"),t=$(".output-tabs > li > a#tab"+e).get(0),$(t.parentNode).addClass("active"),d()},d=function(){return $("#output").val(function(){switch(v()){case 1:return r;case 2:return a;case 3:return l}}())},$(".output-tabs > li > a").click(function(e){return $(".output-tabs > li").removeClass("active"),$(this.parentNode).addClass("active"),d()}),setInterval(function(){var e;return e=$("#input").val(),e!==t?(t=e,$("#output").val("...RUNNING..."),setTimeout(function(){var e,o,i,s,c,f,h,v,g,m,y,b,k,w,L;try{e=n(t),r=e.code()}catch(E){i=E,r="Error in compilation!\n"+i.stack}try{f=u(r),a=JSON.stringify(f,null,4)}catch(E){i=E,f=null,a="Error in Lean run!\n"+i.stack}try{if(null===f)throw Error("Previous step encountered an error... Check earlier tabs for details.");for(m=0,b=f.length;b>m;m++)v=f[m],h=parseInt(null!=(w=v.line)?w:1),e.lineToElement(h).feedback=v;for(l="",L=e.elements,y=0,k=L.length;k>y;y++)if(s=L[y],s.lpfCode&&(l+=s.lpfCode,"\n"!==l.slice(-1)&&(l+="\n"),o=s.feedbackData())){l+="    "+o.result+"\n",o.reason&&(l+="    "+o.reason+"\n");for(c in o)p.call(o,c)&&(g=o[c],"result"!==c&&"reason"!==c&&(l+="    "+c+" = "+g+"\n"))}}catch(E){i=E,l="Error in translation!\n"+i.stack}return d()},0)):void 0},1e3),$("#loadButton").click(function(e){var t,n,r;return n=f(),0===n.length?alert("You have not saved any LPF arrays yet."):(r=prompt("Type the name of the LPF array to load, chosen from the following list:\n \n"+n.join("\n"),n[0]),null!=r?(t=o(r),t?$("#input").val(o(r)):alert('I could not load the LPF array "'+r+'."')):void 0)}),i=null,$("#saveButton").click(function(e){var t;return t=prompt("Type the name under which to save this LPF array.",i),null==t||h.call(f,t)>=0&&!confirm("Save over LPF array of that same name?")?void 0:(c(t,$("#input").val()),i=t)}),$("#eraseButton").click(function(e){var t,n;return t=f(),0===t.length?alert("You have not saved any LPF arrays yet."):(n=prompt("Type the name of the LPF array to erase, chosen from the following list:\n \n"+t.join("\n"),t[0]),null==n||h.call(t,n)<0||!confirm("Are you SURE you want to ERASE "+n+"?")?void 0:s(n))}),$("#input").keydown(function(t){var n,r;if(r={1:2,2:3,3:1},n={1:3,2:1,3:2},t.altKey){if(219===t.keyCode)return e(n[v()]),t.preventDefault(),!1;if(221===t.keyCode)return e(r[v()]),t.preventDefault(),!1}}),$("#input").val("// \n// EXAMPLE CODE TO GET YOU STARTED \n// \nGlobal(SYMBOL,_true,[],Prop,[]) \nGlobal(SYMBOL,_false,[],Prop,[]) \nGlobal(SYMBOL,_or,[Prop,Prop],Prop,[]) \nGlobal(RULE,_true_intro,[],_true,[]) \nGlobal(RULE,_or_intro_left,[A:Prop,B:Prop,B],_or A B,[A,B]) \nGlobal(RULE,_or_intro_right,[A:Prop,B:Prop,A],_or A B,[A,B]) \nBegin() \nLocal(X,Prop,[]) \nStep(_true,[],_true_intro,[]) \nStep(_or X _true,[X],_or_intro_left,[8]) \nEnd()"),$("#input").focus()}),n=function(e){var t,n,r,o,a,l,i,s,u,c,f,d,p,g,m,y,b,k,w,L,E,_,S,$,P,O,x,C,B,T,D,I,A,N,R,Y,j,F,G,U,M,J,V,X,K,H,q,z,Q;for(I={},r=/^\/\/(.*)(\n|$)/,G=/^\s+/,m=/^Global\s*\(\s*(SYMBOL|RULE)\s*,\s*(\w+)\s*,\s*\[([^\]]*)\]\s*,\s*([^,]+)\s*,\s*\[([^\]]*)\]\s*\)/,A=/^Step\s*\(\s*([^,]+)\s*,\s*\[([^\]]*)\]\s*,\s*(\w+)\s*,\s*\[((\s|\d|,)*)\]\s*\)/,Y=/^Type\s*\(\s*(\w+)\s*\)/,n=/^Begin\s*\(\s*\)/,i=/^End\s*\(\s*\)/,S=/^Local\s*\(\s*(\w+)\s*,\s*(\w+)\s*,\s*\[([^\]]*)\]\s*\)/,I=[],_={},d={},u=[],E=null,a=0,O=e,C=null,$=null,I.elements=[{lpfCode:"",lpfPosition:-1,leanCode:"notation `Prop` := Type.{0}",numLines:1}],c=function(){return null==this.feedback?null:(console.log(this.feedback),"information:check result:"===this.feedback.info?{result:"VALID"}:"error: type mismatch at application"===this.feedback.info?{result:"INVALID",reason:"bad premise",premiseIndex:parseInt(this.feedback.text[2].trim().slice(5))+1,correctType:this.feedback.text[4].trim(),assertedType:this.feedback.text[6].trim()}:($=/error: unknown identifier '([^']+)'/.exec(this.feedback.info))?{result:"INVALID",reason:"undeclared identifier",identifier:$[1]}:"error: type mismatch at term"===this.feedback.info?{result:"INVALID",reason:"bad conclusion",correctType:this.feedback.text[2].trim(),assertedType:this.feedback.text[4].trim()}:{result:"INVALID",reason:this.feedback.info,warning:"Unknown error type -- could not translate"})},I.lineToElement=function(e){var t,n,r,o,a;for(n=0,a=this.elements,r=0,o=a.length;o>r;r++)if(t=a[r],n+=t.numLines,n>=e)return t;return null},I.code=function(){var e;return function(){var t,n,r,o;for(r=this.elements,o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(e.leanCode);return o}.call(this).join("\n")},I.add=function(e){return this.elements.push({lpfCode:$[0],lpfPosition:C,leanCode:e,numLines:e.split("\n").length,feedbackData:c})};e.length>0;){if(C=O.length-e.length,$=r.exec(e))I.add("-- "+$[1]);else if($=G.exec(e));else if($=m.exec(e))R=$[1],P=""+$[2],w=$[3],w=/^\s*$/.test(w)?[]:function(){var e,t,n,r;for(n=w.split(","),r=[],e=0,t=n.length;t>e;e++)y=n[e],r.push(y.trim());return r}(),x=$[4],p=$[5],p=/^\s*$/.test(p)?[]:function(){var e,t,n,r;for(n=p.split(","),r=[],e=0,t=n.length;t>e;e++)N=n[e],r.push(N.trim());return r}(),w=function(){var e,t,n;for(n=[],k=e=0,t=w.length;t>e;k=++e)s=w[k],n.push(/:/.test(s)?v.call(function(){var e,t,n,r;for(n=s.split(":"),r=[],e=0,t=n.length;t>e;e++)N=n[e],r.push(N.trim());return r}()).concat(["pair"]):["dummy"+k,s,"singleton"]);return n}(),"SYMBOL"===R&&0===w.length?I.add("constant "+P+" : "+x):"SYMBOL"===R?(b=function(){var e,t,n;for(n=[],e=0,t=w.length;t>e;e++)F=w[e],n.push(F[0]);return n}(),w=function(){var e,t,n;for(n=[],e=0,t=w.length;t>e;e++)F=w[e],n.push("("+F[0]+" : "+F[1]+")");return n}(),I.add("inductive "+P+" "+w.join(" ")+" : "+x+" := mk : "+b.join(" -> ")+" -> "+P+" "+b.join(" "))):"RULE"===R?(w=function(){var e,t,n;for(n=[],e=0,t=w.length;t>e;e++)F=w[e],n.push("pair"===F[2]?"{"+F[0]+" : "+F[1]+"}":"("+F[0]+" : "+F[1]+")");return n}(),I.add("constant "+P+" "+w.join(" ")+" : "+x)):I.add("-- Invalid Global type: "+R),a++;else if($=A.exec(e)){if(o=$[1],p=$[2],p=/^\s*$/.test(p)?[]:function(){var e,t,n,r;for(n=p.split(","),r=[],e=0,t=n.length;t>e;e++)N=n[e],r.push(N.trim());return r}(),D=""+$[3],T=$[4],t=p.slice(0),/^\s*$/.test(T))T=[];else{for(T=function(){var e,t,n,r;for(n=T.split(","),r=[],e=0,t=n.length;t>e;e++)y=n[e],r.push(parseInt(y.trim()));return r}(),U=0,X=T.length;X>U;U++)for(y=T[U],Q=null!=(z=d[y])?z:[],M=0,K=Q.length;K>M;M++)f=Q[M],h.call(t,f)<0&&t.push(f);T=function(){var e,t,n;for(n=[],e=0,t=T.length;t>e;e++)y=T[e],n.push("("+_[y]+")");return n}()}if(l="",g=function(e){for(y=u.length-1;y>=0;){if(u[y].hasOwnProperty(e))return u[y][e];y--}return E},t.length>0){for(j=[],J=0,H=t.length;H>J;J++)F=t[J],g(F)||j.push(F);if(j.length>0){I.add("-- Undeclared variable(s): "+j.join(", "));break}t=function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)F=t[e],r.push("("+F+" : "+g(F)+")");return r}(),l=t.join(" ")}if(T.length>0)for(k=V=0,q=T.length;q>V;k=++V)B=T[k],l+=" (dummy"+k+" : "+B+")",T[k]="dummy"+k;l=l.length>0?"variables "+l:"-- no variable declarations needed",I.add("section \n  "+l+" \n  check (("+D+" "+T.join(" ")+") : "+o+") \nend"),_[a]=o,d[a]=p.slice(0),a++}else if($=Y.exec(e))I.add("-- Type "+$[1]),E=$[1],a++;else if($=n.exec(e))I.add("-- Begin"),u.push({}),a++;else if($=i.exec(e)){if(I.add("-- End"),0===u.length){I.add("-- Cannot do End here!");break}u.pop(),a++}else{if(!($=S.exec(e))){I.add("-- Cannot understand: "+e);break}if(I.add("-- Local "+$[1]+" "+$[2]+" "+$[3]),0===u.length){I.add("-- Cannot do Local here!");break}L=u[u.length-1],L[$[1]]=$[2],a++}e=e.slice($[0].length)}return I}}).call(this);
//# sourceMappingURL=lpf-test.solo.min.js.map