(function(){var t,e,n,o,i;e={steps:[]},o=!0,i=[],window.enterWaitingState=function(){for(var t;document.body.childNodes.length>0;)t=document.body.childNodes[0],i.push(t),$(t).remove();return document.body.innerHTML="Waiting for main application page to load...<br> (If you reloaded this window by itself, you done wrong. Instead, close this window and reload the main application.)"},window.enterReadyState=function(){for(var e,o,r;document.body.childNodes.length>0;)$(document.body.childNodes[0]).remove();for(o=0,r=i.length;r>o;o++)e=i[o],document.body.appendChild(e);return t(),n()},$(window.enterWaitingState),n=function(){var t,n,o,i,r,c,s,l,a,d,u,p,h,y,m;if(o="",null==e.title&&null==e.steps)o="(no steps recorded yet)";else for(p=function(t,e){var n,i,r,c,s;if(null!=t&&(o+="\n"+t+"\n"),null!=e){for(null!=t&&(o+="\n"),c=e.split("\n"),s=[],i=0,r=c.length;r>i;i++)n=c[i],s.push(o+="        "+n+"\n");return s}},r=function(t){return t.replace(/'/g,"\\'")},s=function(t){return"    "+t.replace(RegExp("\n","g"),"\n    ")},o="\nTest built with webLurch test-recording mode.\n\n",u=e.title||"untitled test",o+="    it '"+r(u)+"', inPage ->\n",n=e.steps,l=h=0,y=n.length;y>h;l=++h){if(a=n[l],l>0&&n[l].type===n[l-1].type)i=0;else for(i=1;l+i<n.length&&n[l].type===n[l+i].type;)i++;"comment"===a.type?p(a.content):"check contents"===a.type?(d="'"+r(a.content)+"'",p("Check to be sure the editor contains the correct content.","pageExpects allContent, 'toBeSimilarHTML',\n"+s(d))):"wrong contents"===a.type?(d="'TO BE EDITED: "+r(a.content)+"'",p("At this point the editor contains incorrect contents.  (The code below will need to be edited later to replace the incorrect expectation with a correct one.)\n \nExplanation of how the expectation below is incorrect:  "+a.explanation,"pageExpects allContent, 'toBeSimilarHTML',\n"+s(d))):"key press"===a.type?(c=function(){switch(i){case 0:return null;case 1:return"Simulate pressing a key in the editor.";default:return"Simulate pressing keys in the editor."}}(),t="'"+a.content+"'",a.shift&&(t+=", 'shift'"),a.ctrl&&(t+=", 'ctrl'"),a.alt&&(t+=", 'alt'"),p(c,"pageKey "+t)):"typing"===a.type?p("Simulate typing in the editor.","pageType '"+r(a.content)+"'"):"click"===a.type?p("Simulate a mouse click in the editor.","pageClick "+a.x+", "+a.y):"button"===a.type?(c=function(){switch(i){case 0:return null;case 1:return"Simulate clicking a command button in the editor.";default:return"Simulate clicking command buttons in the editor."}}(),p(c,"pageCommand '"+r(a.content)+"'")):p("ERROR: Unknown step type:","'"+r(a.type)+"'\n# "+a.content)}return null!=(m=document.getElementById("testCode"))?m.textContent=o:void 0},$(n),t=function(){return $("#setTitle").on("click",function(){var t,o;return t=prompt("Enter new test title",null!=(o=e.title)?o:""),null!==t?(e.title=t,n()):void 0}),$("#addComment").on("click",function(){var t;return t=prompt("Enter your comment here",""),null!==t?(e.steps.push({type:"comment",content:t}),n()):void 0}),$("#contentsCorrect").on("click",function(){return e.steps.push({type:"check contents",content:window.opener.tinymce.activeEditor.getContent()}),n()}),$("#contentsIncorrect").on("click",function(){var t;return t=prompt("Please provide an explanation of why the editor's contents are incorrect.  Include a suggestion of what they ought to be, if possible.",""),null!==t?(e.steps.push({type:"wrong contents",content:window.opener.tinymce.activeEditor.getContent(),explanation:t}),n()):void 0}),$("#seeContents").on("click",function(){var t;return t=window.opener.tinymce.activeEditor.getContent(),alert(""===t?"Editor is empty.":"The editor contents are represented in HTML format below.\n\n"+t)}),$("#emailTest").on("click",function(){var t,n,o,i,r,c,s,l;for(o=!1,l=e.steps,c=0,s=l.length;s>c;c++)if(i=l[c]," contents"===i.type.slice(-9)){o=!0;break}return o?(n="ncarter@bentley.edu",r="webLurch: recorded unit test",t=encodeURIComponent("\n \nThe following unit test was recorded on "+new Date+".\n \n(Before sending this email, feel free to add any extra information you have here.)\n \n-----------begin test code------------\n "+document.getElementById("testCode").textContent),window.location.href="mailto:"+n+"?subject="+r+"&body="+t):void alert("You have not made any assertions yet in the test. You must at some point mark the editor contents as correct or incorrect in order for the generated code to actually contain an assertion to be tested.")})},window.editorKeyPress=function(t,o,i,r){var c;return c=String.fromCharCode(t),/[a-zA-Z0-9 ]/.test(c)?e.steps.length>0&&"typing"===e.steps[e.steps.length-1].type?e.steps[e.steps.length-1].content+=c:e.steps.push({type:"typing",content:c}):e.steps.push({type:"key press",content:t,shift:o,ctrl:i,alt:r}),n()},window.editorMouseClick=function(t,o){return e.steps.push({type:"click",x:t,y:o}),n()},window.buttonClicked=function(t){return e.steps.push({type:"button",content:t}),n()}}).call(this);
//# sourceMappingURL=testrecorder.solo.min.js.map