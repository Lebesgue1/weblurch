(function(){var isJustArithmetic,mightBeAName;setAppName("ComplexApp"),window.menuBarIcon={},window.helpAboutText="See the fully documented source code for this demo app at the following URL:\n \nhttps://github.com/nathancarter/weblurch/blob/master/app/complex-example.solo.litcoffee",window.groupTypes=[{name:"computation",text:"Computation group",image:"./images/red-bracket-icon.png",tooltip:"Make selection a computation",color:"#996666",imageHTML:'<font color="#996666"><b>[ ]</b></font>',openImageHTML:'<font color="#996666"><b>[</b></font>',closeImageHTML:'<font color="#996666"><b>]</b></font>',tagContents:function(t){var e,n,o;return e=null!=(n=t.contentAsText())&&null!=(o=n.split("="))?o[0]:void 0,null!=e&&isJustArithmetic(e)?"arithmetic expression":"unknown"},contentsChanged:function(t,e){return Background.addTask("do arithmetic",[t],function(e){var n,o,r,i,a,l,u,s;if(!t.deleted&&null!=e&&(a=t.contentAsText(),e!==a&&(o=a.split("=")[0],n=null!=(u=t.plugin)?u.editor.selection.getRng():void 0,l=t.open.nextSibling,n.startContainer===l&&(r=n.startOffset),t.setContentAsText(""+o+"="+e),l=t.open.nextSibling)))return i=l.ownerDocument.createRange(),null==r&&(r=o.length),r>l.textContent.length&&(r=l.textContent.length),i.setStart(l,r),i.setEnd(l,r),null!=(s=t.plugin)?s.editor.selection.setRng(i):void 0})}},{name:"words",text:"Group of words",image:"./images/red-bracket-icon.png",tooltip:"Make selection about words",color:"#669966",imageHTML:'<font color="#669966"><b>( )</b></font>',openImageHTML:'<font color="#669966"><b>(</b></font>',closeImageHTML:'<font color="#669966"><b>)</b></font>',tagContents:function(t){return mightBeAName(t.contentAsText())},tagMenuItems:function(t){return[{text:"Why this tag?",onclick:function(){return alert("This group was classified as '"+mightBeAName(t.contentAsText())+"' for the following reason:\nText 'might be a name' if it has one to three words, all capitalized.  Otherwise, it is 'probably not a name.'")}},{text:"Change this into a name",onclick:function(){return t.setContentAsText("Rufus Dimble")}},{text:"Change this into a non-name",onclick:function(){return t.setContentAsText("corn on the cob")}}]},contextMenuItems:function(t){return[{text:"Count number of letters",onclick:function(){return alert("Number of letters: "+t.contentAsText().length+"\n(includes spaces and punctuation)")}},{text:"Count number of words",onclick:function(){return alert("Number of words: "+t.contentAsText().split(" ").length+" \n(counts any sequence of non-spaces as a word)")}}]}}],isJustArithmetic=function(t){return/^[.0-9+*/ ()-]+$/.test(t)},Background.registerFunction("do arithmetic",function(group){var e,leftHandSide,result,whenToStop,_ref,_ref1;for(leftHandSide=null!=group&&null!=(_ref=group.text)&&null!=(_ref1=_ref.split("="))?_ref1[0]:void 0,whenToStop=(new Date).getTime()+1e3;(new Date).getTime()<whenToStop;)result=function(){if(null==leftHandSide||!/^[.0-9+*/ ()-]+$/.test(leftHandSide))return"???";try{return eval(leftHandSide)}catch(_error){return e=_error,"???"}}();return result}),mightBeAName=function(t){var e,n,o,r;if(n=t.split(" "),null==n||n.length>3||0===n.length)return"probably not a name";for(o=0,r=n.length;r>o;o++)if(e=n[o],null==e[0]||e[0].toUpperCase()!==e[0])return"probably not a name";return"might be a name"}}).call(this);
//# sourceMappingURL=complex-example.solo.min.js.map